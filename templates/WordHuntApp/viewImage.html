{% extends 'WordHuntApp/base.html' %}
{% load staticfiles %}


{% block title_block %}
	- Leaderboards
{% endblock %}

{% block head_block %}
	<style>
		a {color: black;}
	</style>
    <script src="{% static 'js/jquery.rateit.min.js' %}"></script>
    <script src="{% static 'js/rate.js' %}"></script>
    <link href="{% static 'css/rateit.css' %}" rel="stylesheet">
   <style>
	  #map {
		height: 200px;
		width: 300px;
	   }
	</style>
{% endblock %}

{% block body_block %}
	<div class="row">
		<div class="col-xs-10">
			<font size=6>{{word}}</font>
			<p> by <a href="{% url 'stats' profile_user %}">{{ profile_user }}</a>
			</br>
			<a href="LINKTOSEARCHWORD">Go back to all {{ word }} pictures</a>
		</div>
		<div class="col-xs-2">
			<span style="margin-right: 10%;">Rate:</span></br>
			<div id="{{ image.id }}_rating" class="rateit"
			 data-rateit-mode="font"
			 data-rateit-resetable="false"
			 date-rateit-step="1"
			 data-rateit-value="{{ user_rating }}"
			 data-rateit-readonly="{{ rating_readonly }}"
			 style="font-size:30px">
			</div>
			Average rating: <span id="average_rating"><b>{{ avg_rating }}</b></span>
		</div>
	</div>
	<img class="float-left" src="{{ MEDIA_URL}}{{ image.uploaded_image }}" alt="Image for competition {{ word }}" style=" width: 100%; height: 100%; padding: 5%"/>
	<br>
	<div class="row">
		<div class="col-xs-4">
		{% if latitude and longitude %}
				Image location:
			    <div id="map"></div>
				<script>
				  function initMap() {
					var marketLocation = {lat: {{ latitude }}, lng: {{ longitude }} };
					var map = new google.maps.Map(document.getElementById('map'), {
					  zoom: 4,
					  center: marketLocation
					});
					var marker = new google.maps.Marker({
					  position: marketLocation,
					  map: map
					});
				  }
				</script>
			    <script async defer
					src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCwzxGvPpv2kOYDpBGvU2Nd4n8uhic1sO8&callback=initMap">
				</script>
		{% else %}
			No location provided.
		{% endif %}

		</div>
		{% if comments %}
			<div class="col-sx-8">
				{% for comment in comments %}
					<div class="media">
						<div class="media-left">
							<div class="media-body" align="right">
								<h4 class="media-heading">{{comment.user}}<small> on {{comment.creation_date}}:</small></h4>
								<p>{{comment.text}}</p>
							</div>
						</div>
					</div>					
				{% endfor %}
				<div class="form-group">
					<textarea class="form-control" rows="2" style="width: 60%; float: right;"></textarea><br>
					<button type="button" class="btn btn-success" style="float: right;">Comment</button>
				</div>
			</div>
		{% else %}
			<div class="col-sx-8">
				<p>No Comments for this picture.</p>
			</div>
			<div class="media">
			<div class="form-group">
					</br>
					<button type="button" class="btn btn-success" style="float: right;">Comment</button>
					<textarea class="form-control" rows="2" style="width: 60%; float: right;"></textarea>
				</div>
			</div>
		{% endif %}
		</div>
				
				
	<br/>
	<a href="{% url 'main' %}">Return to the main page</a>
{% endblock %}